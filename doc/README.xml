<?xml version="1.0" encoding="UTF-8"?>
<xpan:report xmlns:xpan="https://www.daliboris.cz/ns/xproc/analysis">
   <analysis file-name="common-lib.xpl"
             path="file:///V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xproc/common-lib.xpl"
             xmlns="https://www.daliboris.cz/ns/xproc/analysis"
             xmlns:xhtml="http://www.w3.org/1999/xhtml">
      <library>
         <prolog>
            <documentation length="0">
               <xhtml:section xmlns:xevt="https://www.daliboris.cz/ns/xproc/evt"
                              xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                              xmlns:xtei="https://www.daliboris.cz/ns/xproc/tei">
                  <xhtml:h1/>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <namespaces>
               <namespace prefix="p"
                          value="http://www.w3.org/ns/xproc"/>
               <namespace prefix="xevt"
                          value="https://www.daliboris.cz/ns/xproc/evt"/>
               <namespace prefix="xhtml"
                          value="http://www.w3.org/1999/xhtml"/>
               <namespace prefix="xs"
                          value="http://www.w3.org/2001/XMLSchema"/>
               <namespace prefix="xtei"
                          value="https://www.daliboris.cz/ns/xproc/tei"/>
               <namespace prefix="xxml"
                          value="https://www.daliboris.cz/ns/xproc/xml"/>
               <namespace prefix="xml"
                          value="http://www.w3.org/XML/1998/namespace"/>
            </namespaces>
         </prolog>
         <body>
            <documentation length="0">
               <xhtml:section xmlns:xevt="https://www.daliboris.cz/ns/xproc/evt"
                              xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                              xmlns:xtei="https://www.daliboris.cz/ns/xproc/tei">
                  <xhtml:h1/>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <step type="xxml:clean-namespaces"
                  name="cleaning-namespaces">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xevt="https://www.daliboris.cz/ns/xproc/evt"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/tei">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xtei"
                                value="https://www.daliboris.cz/ns/xproc/tei"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xevt="https://www.daliboris.cz/ns/xproc/evt"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/tei">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/xml/xml-removing-namespaces.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/xml/xml-removing-namespaces.xsl"/>
                     </port>
                  </call>
               </body>
            </step>
         </body>
      </library>
   </analysis>
   <analysis file-name="docx2tei-lib.xpl"
             path="file:///V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xproc/docx2tei-lib.xpl"
             xmlns="https://www.daliboris.cz/ns/xproc/analysis"
             xmlns:xhtml="http://www.w3.org/1999/xhtml">
      <library>
         <prolog>
            <documentation length="0">
               <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                              xmlns:css="http://www.w3.org/1996/css"
                              xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                              xmlns:fs="https://www.daliboris.cz/ns/file-system"
                              xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                              xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                              xmlns:hub="http://docbook.org/ns/docbook"
                              xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                              xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                              xmlns:xd2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"
                              xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                              xmlns:tei="http://www.tei-c.org/ns/1.0">
                  <xhtml:h1/>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <namespaces>
               <namespace prefix="css"
                          value="http://www.w3.org/1996/css"/>
               <namespace prefix="dxfs"
                          value="https://www.daliboris.cz/ns/xproc/file-system"/>
               <namespace prefix="fs"
                          value="https://www.daliboris.cz/ns/file-system"/>
               <namespace prefix="hub"
                          value="http://docbook.org/ns/docbook"/>
               <namespace prefix="p"
                          value="http://www.w3.org/ns/xproc"/>
               <namespace prefix="tei"
                          value="http://www.tei-c.org/ns/1.0"/>
               <namespace prefix="xd2t"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"/>
               <namespace prefix="xevt"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
               <namespace prefix="xhtml"
                          value="http://www.w3.org/1999/xhtml"/>
               <namespace prefix="xlog"
                          value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
               <namespace prefix="xpef"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
               <namespace prefix="xpl"
                          value="https://www.daliboris.cz/ns/xproc/pipeline"/>
               <namespace prefix="xs"
                          value="http://www.w3.org/2001/XMLSchema"/>
               <namespace prefix="xtei"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
               <namespace prefix="xxml"
                          value="https://www.daliboris.cz/ns/xproc/xml"/>
               <namespace prefix="xml"
                          value="http://www.w3.org/XML/1998/namespace"/>
            </namespaces>
            <imports>
               <import href="../includes/file-system-xpc-lib/src/xproc/file-system-xpc-lib.xpl"/>
               <import href="../includes/log-xpc-lib/src/xproc/log-xpc-lib.xpl"/>
               <import href="pef-xpc-lib-base.xpl"/>
               <import href="tei-play-lib.xpl"/>
            </imports>
         </prolog>
         <body>
            <documentation length="0">
               <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                              xmlns:css="http://www.w3.org/1996/css"
                              xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                              xmlns:fs="https://www.daliboris.cz/ns/file-system"
                              xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                              xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                              xmlns:hub="http://docbook.org/ns/docbook"
                              xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                              xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                              xmlns:xd2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"
                              xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                              xmlns:tei="http://www.tei-c.org/ns/1.0">
                  <xhtml:h1/>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <step type="xd2t:input-processing"
                  name="input-processing">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xd2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="css"
                                value="http://www.w3.org/1996/css"/>
                     <namespace prefix="dxfs"
                                value="https://www.daliboris.cz/ns/xproc/file-system"/>
                     <namespace prefix="fs"
                                value="https://www.daliboris.cz/ns/file-system"/>
                     <namespace prefix="hub"
                                value="http://docbook.org/ns/docbook"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xd2t"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpl"
                                value="https://www.daliboris.cz/ns/xproc/pipeline"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xtei"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="data-directory-path"
                             as="xs:anyURI?"
                             required="false"/>
                     <option name="data-file-path"
                             as="xs:string?"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xd2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="dxfs:document-file-info"
                        name="info"/>
                  <call step="p:variable"
                        name="file">
                     <parameter name="select"
                                value="/fs:file"/>
                     <parameter name="pipe"
                                value="report@info"/>
                  </call>
                  <call step="p:variable"
                        name="data-file-path-uri">
                     <parameter name="select"
                                value="resolve-uri($data-file-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="log-output-directory">
                     <parameter name="select"
                                value="if(empty($debug-path)) then () else $debug-path || '/docx2tei/' || $file/@stem"/>
                  </call>
                  <call step="p:variable"
                        name="log-file-name">
                     <parameter name="select"
                                value="$file/@stem || '.xml'"/>
                  </call>
                  <call step="xpef:input-processing">
                     <parameter name="debug-path"
                                value="{$debug-path}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="1"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/common/character-maps.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/common/character-maps.xsl"/>
                     </port>
                  </call>
                  <call step="p:file-create-tempfile">
                     <parameter name="delete-on-exit"
                                value="true"/>
                     <parameter name="suffix"
                                value=".xml"/>
                  </call>
                  <call step="p:variable"
                        name="href-tempfile-uri">
                     <parameter name="select"
                                value="string(.)"/>
                  </call>
                  <call step="p:store">
                     <parameter name="href"
                                value="{$href-tempfile-uri}"/>
                     <port name="anonymous">
                        <parameter name="pipe"
                                   value="result@character-maps"/>
                     </port>
                  </call>
                  <call step="p:load">
                     <parameter name="href"
                                value="{$href-tempfile-uri}"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/docx2tei/xml/xml-combine-elements-after-ooxml-conversion.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/docx2tei/xml/xml-combine-elements-after-ooxml-conversion.xsl"/>
                     </port>
                     <parameter name="parameters"
                                value="map {'phase' : 1 }"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="2"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/docx2tei/xml/xml-combine-elements-after-ooxml-conversion.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/docx2tei/xml/xml-combine-elements-after-ooxml-conversion.xsl"/>
                     </port>
                     <parameter name="parameters"
                                value="map {'phase' : 2 }"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="3"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/docx2tei/xml/xml-clean-element-names.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/docx2tei/xml/xml-clean-element-names.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="4"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/docx2tei/xml/xml-fix-element-combinations.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/docx2tei/xml/xml-fix-element-combinations.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="5"/>
                  </call>
               </body>
            </step>
            <step type="xd2t:tei-conversion"
                  name="tei-conversion">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xd2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="css"
                                value="http://www.w3.org/1996/css"/>
                     <namespace prefix="dxfs"
                                value="https://www.daliboris.cz/ns/xproc/file-system"/>
                     <namespace prefix="fs"
                                value="https://www.daliboris.cz/ns/file-system"/>
                     <namespace prefix="hub"
                                value="http://docbook.org/ns/docbook"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xd2t"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpl"
                                value="https://www.daliboris.cz/ns/xproc/pipeline"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xtei"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="data-file-path"
                             as="xs:string?"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xd2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="data-file-path-uri">
                     <parameter name="select"
                                value="resolve-uri($data-file-path, $base-uri)"/>
                  </call>
                  <call step="dxfs:document-file-info"
                        name="info"/>
                  <call step="p:variable"
                        name="file">
                     <parameter name="select"
                                value="/fs:file"/>
                     <parameter name="pipe"
                                value="report@info"/>
                  </call>
                  <call step="p:variable"
                        name="log-output-directory">
                     <parameter name="select"
                                value="$debug-path || '/docx2tei/' || $file/@stem || '/teiCorpus'"/>
                  </call>
                  <call step="p:variable"
                        name="log-file-name">
                     <parameter name="select"
                                value="$file/@stem || '.xml'"/>
                  </call>
                  <call step="xxml:clean-namespaces"/>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="22"/>
                  </call>
               </body>
            </step>
            <step type="xd2t:convert"
                  name="conversion">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xd2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="css"
                                value="http://www.w3.org/1996/css"/>
                     <namespace prefix="dxfs"
                                value="https://www.daliboris.cz/ns/xproc/file-system"/>
                     <namespace prefix="fs"
                                value="https://www.daliboris.cz/ns/file-system"/>
                     <namespace prefix="hub"
                                value="http://docbook.org/ns/docbook"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xd2t"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpl"
                                value="https://www.daliboris.cz/ns/xproc/pipeline"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xtei"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="target"
                             as="xs:string*"
                             values="('TEI', 'text')"/>
                     <option name="data-file-path"
                             as="xs:string?"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xd2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:choose"
                        length="1">
                     <call step="p:when">
                        <parameter name="test"
                                   value="$target='TEI'"/>
                     </call>
                  </call>
                  <call step="p:choose"
                        length="1">
                     <call step="p:when">
                        <parameter name="test"
                                   value="$target='text'"/>
                     </call>
                  </call>
               </body>
            </step>
            <step type="xd2t:docx-to-text">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xd2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="css"
                                value="http://www.w3.org/1996/css"/>
                     <namespace prefix="dxfs"
                                value="https://www.daliboris.cz/ns/xproc/file-system"/>
                     <namespace prefix="fs"
                                value="https://www.daliboris.cz/ns/file-system"/>
                     <namespace prefix="hub"
                                value="http://docbook.org/ns/docbook"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xd2t"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpl"
                                value="https://www.daliboris.cz/ns/xproc/pipeline"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xtei"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xd2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/docx2tei"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
               </body>
            </step>
         </body>
      </library>
   </analysis>
   <analysis file-name="dracor-lib.xpl"
             path="file:///V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xproc/dracor-lib.xpl"
             xmlns="https://www.daliboris.cz/ns/xproc/analysis"
             xmlns:xhtml="http://www.w3.org/1999/xhtml">
      <library>
         <prolog>
            <documentation length="0">
               <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                              xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                              xmlns:xdc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"
                              xmlns:tei="http://www.tei-c.org/ns/1.0">
                  <xhtml:h1/>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <namespaces>
               <namespace prefix="p"
                          value="http://www.w3.org/ns/xproc"/>
               <namespace prefix="tei"
                          value="http://www.tei-c.org/ns/1.0"/>
               <namespace prefix="xdc"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"/>
               <namespace prefix="xhtml"
                          value="http://www.w3.org/1999/xhtml"/>
               <namespace prefix="xpef"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
               <namespace prefix="xs"
                          value="http://www.w3.org/2001/XMLSchema"/>
               <namespace prefix="xxml"
                          value="https://www.daliboris.cz/ns/xproc/xml"/>
               <namespace prefix="xml"
                          value="http://www.w3.org/XML/1998/namespace"/>
            </namespaces>
            <imports>
               <import href="common-lib.xpl"/>
            </imports>
         </prolog>
         <body>
            <documentation length="0">
               <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                              xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                              xmlns:xdc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"
                              xmlns:tei="http://www.tei-c.org/ns/1.0">
                  <xhtml:h1/>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <step type="xdc:tei-to-dracor"
                  name="tei-to-dracor">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xdc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xdc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="data-file-path"
                             as="xs:string?"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xdc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="data-file-path-uri">
                     <parameter name="select"
                                value="resolve-uri($data-file-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="dracor-id">
                     <parameter name="select"
                                value="/data/@dracor-id"/>
                     <parameter name="href"
                                value="{$data-file-path-uri}"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:div[@type='editorial']"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:fileDesc/tei:notesStmt"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:sourceDesc/tei:listWit"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:sourceDesc/tei:msDesc"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:listPerson/tei:head[@xml:lang='cs']"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:listPerson/tei:head/@xml:lang"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:listPerson/tei:person/tei:persName[@xml:lang='cs']"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:listPerson/tei:person/tei:occupation"/>
                  </call>
                  <call step="p:replace">
                     <parameter name="match"
                                value="tei:listBibl"/>
                     <parameter name="use-when"
                                value="false()"/>
                     <port name="replacement"/>
    
     Theatrum Neolatinum Repository
     http://theatrum-neolatinum.cz/
     
      
       CC-BY-3.0
       Lizenzvertrag
      
     
     
      Kateřina Bobková-Valentová, Alena Bočková, Magdaléna Jacková, Martin Bažil, Eva Pauerová, Jan Zdichynec a Zdeněk Žalud:
      Angelus ad aras D. Joannes Nepomucenus. In Sv. Jan Nepomucký na jezuitských školních scénách, Theatrum Neolatinum. Latinské divadlo v českých zemích 1. Praha: Academia, 2015, s. 78–139.
     
       
   </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:encodingDesc"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:profileDesc/tei:creation"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:profileDesc/tei:langUsage"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:body/tei:div[@type='title']"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:text/@*"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:p/@*"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:emph/@rendition"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:facsimile"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:pb/@xml:id"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:pb/@facs"/>
                  </call>
                  <call step="p:unwrap">
                     <parameter name="match"
                                value="tei:speaker/tei:persName"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:app/tei:rdg"/>
                  </call>
                  <call step="p:unwrap">
                     <parameter name="match"
                                value="tei:app/tei:lem"/>
                  </call>
                  <call step="p:unwrap">
                     <parameter name="match"
                                value="tei:app"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:anchor/@subtype"/>
                  </call>
                  <call step="p:unwrap">
                     <parameter name="match"
                                value="tei:supplied"/>
                  </call>
                  <call step="p:rename">
                     <parameter name="match"
                                value="tei:hi"/>
                     <parameter name="new-name"
                                value="tei:emph"/>
                  </call>
                  <call step="p:add-attribute">
                     <parameter name="match"
                                value="tei:note[@n]"/>
                     <parameter name="attribute-name"
                                value="place"/>
                     <parameter name="attribute-value"
                                value="foot"/>
                  </call>
                  <call step="p:add-attribute">
                     <parameter name="match"
                                value="tei:emph[@rend='italic' or @rendition='italic']"/>
                     <parameter name="attribute-name"
                                value="style"/>
                     <parameter name="attribute-value"
                                value="font-style: italic;"/>
                     <parameter name="use-when"
                                value="false()"/>
                  </call>
                  <call step="p:rename">
                     <parameter name="match"
                                value="@rendition"/>
                     <parameter name="new-name"
                                value="rend"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:space"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:editionStmt"/>
                  </call>
                  <call step="p:replace">
                     <parameter name="match"
                                value="tei:availability"/>
                     <port name="replacement"/>
    
     
      CC BY-NC-SA 4.0
      License
     
    
   </call>
                  <call step="p:unwrap">
                     <parameter name="match"
                                value="tei:div[@type='scene']/tei:div[tei:div]"/>
                  </call>
                  <call step="p:insert">
                     <parameter name="match"
                                value="tei:teiHeader"/>
                     <parameter name="position"
                                value="after"/>
                     <parameter name="use-when"
                                value="false()"/>
                     <port name="insertion"/>
                  </call>
                  <call step="p:add-attribute">
                     <parameter name="match"
                                value="tei:TEI"/>
                     <parameter name="attribute-name"
                                value="xml:id"/>
                     <parameter name="attribute-value"
                                value="{$dracor-id}"/>
                  </call>
                  <call step="p:insert">
                     <parameter name="match"
                                value="tei:TEI"/>
                     <parameter name="position"
                                value="before"/>
                     <port name="insertion"/>
                  </call>
                  <call step="p:unwrap">
                     <parameter name="match"
                                value="tei:ref[starts-with(@target, '#')][. = 'Potipharis']"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:note[tei:person][count(*) eq 1]"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:person/tei:note[@type='bio']"/>
                  </call>
                  <call step="xxml:clean-namespaces"/>
                  <call step="p:identity"/>
               </body>
            </step>
         </body>
      </library>
   </analysis>
   <analysis file-name="evt-play-lib.xpl"
             path="file:///V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xproc/evt-play-lib.xpl"
             xmlns="https://www.daliboris.cz/ns/xproc/analysis"
             xmlns:xhtml="http://www.w3.org/1999/xhtml">
      <library>
         <prolog>
            <documentation length="0">
               <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                              xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                              xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                              xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                              xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                              xmlns:tei="http://www.tei-c.org/ns/1.0">
                  <xhtml:h1/>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <namespaces>
               <namespace prefix="p"
                          value="http://www.w3.org/ns/xproc"/>
               <namespace prefix="tei"
                          value="http://www.tei-c.org/ns/1.0"/>
               <namespace prefix="xevt"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
               <namespace prefix="xhtml"
                          value="http://www.w3.org/1999/xhtml"/>
               <namespace prefix="xlog"
                          value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
               <namespace prefix="xpef"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
               <namespace prefix="xpefc"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
               <namespace prefix="xs"
                          value="http://www.w3.org/2001/XMLSchema"/>
               <namespace prefix="xxml"
                          value="https://www.daliboris.cz/ns/xproc/xml"/>
               <namespace prefix="xml"
                          value="http://www.w3.org/XML/1998/namespace"/>
            </namespaces>
            <imports>
               <import href="common-lib.xpl"/>
               <import href="pef-xpc-lib-common.xpl"/>
               <import href="../includes/file-system-xpc-lib/src/xproc/file-system-xpc-lib.xpl"/>
            </imports>
            <options/>
         </prolog>
         <body>
            <documentation length="0">
               <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                              xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                              xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                              xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                              xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                              xmlns:tei="http://www.tei-c.org/ns/1.0">
                  <xhtml:h1/>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <step type="xevt:move-front">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpefc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/evt/evt-move-front-to-body.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/evt/evt-move-front-to-body.xsl"/>
                     </port>
                  </call>
                  <call step="xxml:clean-namespaces"/>
               </body>
            </step>
            <step type="xevt:divide-texts"
                  name="dividing-texts">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpefc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="output-directory-path"
                             as="xs:string"
                             required="true"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="output-directory-path-uri">
                     <parameter name="select"
                                value="resolve-uri($output-directory-path, $base-uri)"/>
                  </call>
                  <call step="xxml:clean-namespaces"/>
                  <call step="p:for-each">
                     <port name="anonymous">
                        <parameter name="select"
                                   value="//tei:TEI[tei:text[@n=('Text edice', 'Překlad', 'Synopse') or contains(@xml:id, 'preklad')]]"/>
                     </port>
                  </call>
                  <call step="p:identity">
                     <port name="anonymous">
                        <parameter name="pipe"
                                   value="source@dividing-texts"/>
                     </port>
                  </call>
               </body>
            </step>
            <step type="xevt:include-texts"
                  name="including-texts">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpefc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="data-file-path"
                             as="xs:string"
                             required="true"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="data-file-path-uri">
                     <parameter name="select"
                                value="resolve-uri($data-file-path, $base-uri)"/>
                  </call>
                  <call step="p:replace">
                     <parameter name="match"
                                value="/tei:teiCorpus//tei:listPerson"/>
                     <port name="replacement">
                        <parameter name="href"
                                   value="{$data-file-path-uri}"/>
                        <parameter name="select"
                                   value="/data/tei:listPerson"/>
                     </port>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-change-text-to-include.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-change-text-to-include.xsl"/>
                     </port>
                  </call>
                  <call step="xxml:clean-namespaces"/>
               </body>
            </step>
            <step type="xevt:tei-to-evt"
                  name="tei-to-evt">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpefc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="data-file-path"
                             as="xs:string?"/>
                     <option name="output-directory-path"
                             as="xs:string?"/>
                     <option name="output-file-name"
                             as="xs:string?"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="data-file-path-uri">
                     <parameter name="select"
                                value="resolve-uri($data-file-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="output-file-path-uri">
                     <parameter name="select"
                                value="resolve-uri(concat($output-directory-path, '/', $output-file-name), $base-uri)"/>
                  </call>
                  <call step="xpefc:add-persName-to-speaker">
                     <parameter name="debug-path"
                                value="{$debug-path}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="p:use-when"
                                value="$enable-logging"/>
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="1"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="//*[@source='#dracor']"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="p:use-when"
                                value="$enable-logging"/>
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="2"/>
                  </call>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Překlad', 'Synopse')]]"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="p:use-when"
                                value="$enable-logging"/>
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="3"/>
                  </call>
                  <call step="xevt:divide-texts">
                     <parameter name="output-directory-path"
                                value="{$output-directory-path}"/>
                     <parameter name="debug-path"
                                value="{$debug-path}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="p:use-when"
                                value="$enable-logging"/>
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="4"/>
                  </call>
                  <call step="xevt:include-texts">
                     <parameter name="data-file-path"
                                value="{$data-file-path}"/>
                     <parameter name="debug-path"
                                value="{$debug-path}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="p:use-when"
                                value="$enable-logging"/>
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="5"/>
                  </call>
                  <call step="p:choose"
                        length="1">
                     <call step="p:when">
                        <parameter name="test"
                                   value="not(empty($output-directory-path) or empty($output-file-name))"/>
                     </call>
                  </call>
               </body>
            </step>
            <step type="xevt:validate-hierarchies"
                  name="validating-hierarchies">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpefc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="data-file-path"
                             as="xs:string?"/>
                     <option name="output-directory-path"
                             as="xs:string?"/>
                     <option name="output-file-name"
                             as="xs:string?"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="data-file-path-uri">
                     <parameter name="select"
                                value="resolve-uri($data-file-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="output-file-path-uri">
                     <parameter name="select"
                                value="resolve-uri(concat($output-directory-path, '/', $output-file-name), $base-uri)"/>
                  </call>
                  <call step="p:xslt">
                     <port name="source"/>
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/validation/hierarchy-overview.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/validation/hierarchy-overview.xsl"/>
                     </port>
                  </call>
                  <call step="p:store">
                     <parameter name="href"
                                value="{$output-file-path-uri}"/>
                  </call>
               </body>
            </step>
            <step type="xevt:zip"
                  name="zipping">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpefc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="data-file-path"
                             as="xs:string?"/>
                     <option name="input-directory-path"
                             as="xs:string?"/>
                     <option name="output-directory-path"
                             as="xs:string?"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:identity"/>
               </body>
            </step>
         </body>
      </library>
   </analysis>
   <analysis file-name="hub2tei-lib.xpl"
             path="file:///V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xproc/hub2tei-lib.xpl"
             xmlns="https://www.daliboris.cz/ns/xproc/analysis"
             xmlns:xhtml="http://www.w3.org/1999/xhtml">
      <library>
         <prolog>
            <documentation length="0">
               <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                              xmlns:css="http://www.w3.org/1996/css"
                              xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                              xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                              xmlns:fs="https://www.daliboris.cz/ns/file-system"
                              xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                              xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                              xmlns:hub="http://docbook.org/ns/docbook"
                              xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                              xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                              xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                              xmlns:tei="http://www.tei-c.org/ns/1.0">
                  <xhtml:h1/>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <namespaces>
               <namespace prefix="css"
                          value="http://www.w3.org/1996/css"/>
               <namespace prefix="dxfs"
                          value="https://www.daliboris.cz/ns/xproc/file-system"/>
               <namespace prefix="fs"
                          value="https://www.daliboris.cz/ns/file-system"/>
               <namespace prefix="hub"
                          value="http://docbook.org/ns/docbook"/>
               <namespace prefix="p"
                          value="http://www.w3.org/ns/xproc"/>
               <namespace prefix="tei"
                          value="http://www.tei-c.org/ns/1.0"/>
               <namespace prefix="xevt"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
               <namespace prefix="xh2t"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"/>
               <namespace prefix="xhtml"
                          value="http://www.w3.org/1999/xhtml"/>
               <namespace prefix="xlog"
                          value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
               <namespace prefix="xpef"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
               <namespace prefix="xpl"
                          value="https://www.daliboris.cz/ns/xproc/pipeline"/>
               <namespace prefix="xs"
                          value="http://www.w3.org/2001/XMLSchema"/>
               <namespace prefix="xtei"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
               <namespace prefix="xxml"
                          value="https://www.daliboris.cz/ns/xproc/xml"/>
               <namespace prefix="xml"
                          value="http://www.w3.org/XML/1998/namespace"/>
            </namespaces>
            <imports>
               <import href="../includes/file-system-xpc-lib/src/xproc/file-system-xpc-lib.xpl"/>
               <import href="../includes/log-xpc-lib/src/xproc/log-xpc-lib.xpl"/>
               <import href="tei-play-lib.xpl"/>
            </imports>
         </prolog>
         <body>
            <documentation length="0">
               <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                              xmlns:css="http://www.w3.org/1996/css"
                              xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                              xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                              xmlns:fs="https://www.daliboris.cz/ns/file-system"
                              xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                              xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                              xmlns:hub="http://docbook.org/ns/docbook"
                              xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                              xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                              xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                              xmlns:tei="http://www.tei-c.org/ns/1.0">
                  <xhtml:h1/>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <step type="xh2t:input-processing"
                  name="input-processing">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="css"
                                value="http://www.w3.org/1996/css"/>
                     <namespace prefix="dxfs"
                                value="https://www.daliboris.cz/ns/xproc/file-system"/>
                     <namespace prefix="fs"
                                value="https://www.daliboris.cz/ns/file-system"/>
                     <namespace prefix="hub"
                                value="http://docbook.org/ns/docbook"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xh2t"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpl"
                                value="https://www.daliboris.cz/ns/xproc/pipeline"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xtei"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="data-file-path"
                             as="xs:string?"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="dxfs:document-file-info"
                        name="info"/>
                  <call step="p:variable"
                        name="file">
                     <parameter name="select"
                                value="/fs:file"/>
                     <parameter name="pipe"
                                value="report@info"/>
                  </call>
                  <call step="p:variable"
                        name="data-file-path-uri">
                     <parameter name="select"
                                value="resolve-uri($data-file-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="log-output-directory">
                     <parameter name="select"
                                value="$debug-path || '/hub2tei/' || $file/@stem"/>
                  </call>
                  <call step="p:variable"
                        name="log-file-name">
                     <parameter name="select"
                                value="$file/@stem || '.xml'"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/hub/hub-remove-fw.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/hub/hub-remove-fw.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="1"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../Xslt/hub/hub-split2section.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/Xslt/hub/hub-split2section.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="2"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../Xslt/hub/hub-group-notes.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/Xslt/hub/hub-group-notes.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="3"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/hub/hub-move-sections.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/hub/hub-move-sections.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="4"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../Xslt/hub/hub-preclean-typos.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/Xslt/hub/hub-preclean-typos.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="5"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../Xslt/hub/hub-clean-typos.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/Xslt/hub/hub-clean-typos.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="6"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="hub:section[@role='figure']"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="7"/>
                  </call>
               </body>
            </step>
            <step type="xh2t:tei-conversion"
                  name="tei-conversion">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <documentation length="47">
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Vloženým zpěvohrám přiřadí samostatné číslování</p>
                  </documentation>
                  <documentation length="379">
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Změna odsazení textu. Mezery (elementy <b>space</b>) ve verších se redukují na měnší počet:</p>
                     <ul xmlns=""
                         xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                         xmlns:css="http://www.w3.org/1996/css"
                         xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                         xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                         xmlns:fs="https://www.daliboris.cz/ns/file-system"
                         xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                         xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                         xmlns:hub="http://docbook.org/ns/docbook"
                         xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                         xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                         xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                         xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <li>jedna mezera (<b>@quantity="1")</b> se odstraňuje (původně šlo o kombinaci poznámky nebo paginy a textu)</li>
                        <li>dvě mezery jsou bezpříznakové (odsazení kvůli sazbě), takže se ruší</li>
                        <li>3 a více mezer se nahrazují mezerami, jejichž počet je snížen o 1</li>
                     </ul>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Odstraní se také odstavec, který obsahuje pouze element <b>space</b>.</p>
                  </documentation>
                  <documentation length="458">
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Přiřazení obrázků ke stranám, pouze u originálního textu, netýká se překladu.</p>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Vytvoří se element <b>facsimile</b> se seznamem souborů s obrázky jednotlivých stran.</p>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">V elementu <b>pb</b> se vytvří atrubut <b>@facs</b> s odkazem na soubor s obrázkem odpovídající strany.</p>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Jako parametry lze nastavit:</p>
                     <ul xmlns=""
                         xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                         xmlns:css="http://www.w3.org/1996/css"
                         xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                         xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                         xmlns:fs="https://www.daliboris.cz/ns/file-system"
                         xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                         xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                         xmlns:hub="http://docbook.org/ns/docbook"
                         xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                         xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                         xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                         xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <li>
                           <i>path</i>: výchozí cestu k souborům (musí končit lomítkem);</li>
                        <li>
                           <i>extension</i>: přípponá souborů (bez úvodní tečky)</li>
                     </ul>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Jméno se generuje z identifikátoru elementu <b>pb</b> přidáním výchozí cesty a přípony.</p>
                  </documentation>
                  <documentation length="194">
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Rozepíše odkazy na více postav</p>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Rozepíše zkrácené podoby jmen postav (Euch., Gen.), odstraní odpoídající poznámky.</p>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Verše, které nemají přiřazenou postavu, seskupí a přiřadí jim nejbližší postavu.</p>
                  </documentation>
                  <namespaces>
                     <namespace prefix="css"
                                value="http://www.w3.org/1996/css"/>
                     <namespace prefix="dxfs"
                                value="https://www.daliboris.cz/ns/xproc/file-system"/>
                     <namespace prefix="fs"
                                value="https://www.daliboris.cz/ns/file-system"/>
                     <namespace prefix="hub"
                                value="http://docbook.org/ns/docbook"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xh2t"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpl"
                                value="https://www.daliboris.cz/ns/xproc/pipeline"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xtei"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="data-file-path"
                             as="xs:string?"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="data-file-path-uri">
                     <parameter name="select"
                                value="resolve-uri($data-file-path, $base-uri)"/>
                  </call>
                  <call step="dxfs:document-file-info"
                        name="info"/>
                  <call step="p:variable"
                        name="file">
                     <parameter name="select"
                                value="/fs:file"/>
                     <parameter name="pipe"
                                value="report@info"/>
                  </call>
                  <call step="p:variable"
                        name="log-output-directory">
                     <parameter name="select"
                                value="$debug-path || '/hub2tei/' || $file/@stem || '/teiCorpus'"/>
                  </call>
                  <call step="p:variable"
                        name="log-file-name">
                     <parameter name="select"
                                value="$file/@stem || '.xml'"/>
                  </call>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="hub:hub/hub:section"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="1"/>
                  </call>
                  <call step="p:rename">
                     <parameter name="new-name"
                                value="tei:teiCorpus"/>
                     <parameter name="match"
                                value="hub:hub"/>
                  </call>
                  <call step="p:add-attribute">
                     <parameter name="match"
                                value="tei:teiCorpus"/>
                     <parameter name="attribute-name"
                                value="xml:lang"/>
                     <parameter name="attribute-value"
                                value="la"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:teiCorpus/@version"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:teiCorpus/@css:version"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:teiCorpus/@css:rule-selection-attribute"/>
                  </call>
                  <call step="p:insert">
                     <parameter name="match"
                                value="tei:teiCorpus"/>
                     <parameter name="position"
                                value="first-child"/>
                     <port name="insertion">
                        <parameter name="href"
                                   value="{$data-file-path-uri}"/>
                        <parameter name="select"
                                   value="//tei:teiHeader"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="2"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-text-kind-of.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-text-kind-of.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="3"/>
                  </call>
                  <call step="xxml:clean-namespaces"/>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="4"/>
                  </call>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Překlad')]]"/>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-arrange-play-hierarchy.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-arrange-play-hierarchy.xsl"/>
                        </port>
                     </call>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="5"/>
                  </call>
                  <call step="p:viewport"
                        name="play-text">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Překlad')]]"/>
                  </call>
                  <call step="xxml:clean-namespaces"/>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="6"/>
                  </call>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Synopse')]]"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="7"/>
                  </call>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Překlad')]]"/>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-assign-persons.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-assign-persons.xsl"/>
                        </port>
                        <parameter name="parameters"
                                   value="map {'data-file-path' : $data-file-path-uri }"/>
                     </call>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="8"/>
                  </call>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Překlad')]]"/>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-assign-line-number-iterating.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-assign-line-number-iterating.xsl"/>
                        </port>
                        <parameter name="parameters"
                                   value="map {'data-file-path' : $data-file-path-uri }"/>
                     </call>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="9"/>
                  </call>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Překlad')]]/tei:text/tei:body"/>
                     <parameter name="use-when"
                                value="true()"/>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-assign-note-by-line.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-assign-note-by-line.xsl"/>
                        </port>
                     </call>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-notes-to-critical-apparatus.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-notes-to-critical-apparatus.xsl"/>
                        </port>
                     </call>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-speaker-remove-colon.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-speaker-remove-colon.xsl"/>
                        </port>
                     </call>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="10"/>
                  </call>
                  <documentation length="47">
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Vloženým zpěvohrám přiřadí samostatné číslování</p>
                  </documentation>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Překlad')]]"/>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/angelus/angelus-assign-line-number-cantus.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/angelus/angelus-assign-line-number-cantus.xsl"/>
                        </port>
                     </call>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/angelus/angelus-divide-line-in-cantus.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/angelus/angelus-divide-line-in-cantus.xsl"/>
                        </port>
                     </call>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="11"/>
                  </call>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Překlad')]]"/>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-square-brackets-to-supplied.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-square-brackets-to-supplied.xsl"/>
                        </port>
                     </call>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="12"/>
                  </call>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Překlad')]]"/>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-separate-cantus-div.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-separate-cantus-div.xsl"/>
                        </port>
                     </call>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-divide-speech.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-divide-speech.xsl"/>
                        </port>
                     </call>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-group-speeches-by-divison.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-group-speeches-by-divison.xsl"/>
                        </port>
                     </call>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-arrange-div-hieararchy.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-arrange-div-hieararchy.xsl"/>
                        </port>
                     </call>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-add-n-to-num-divs.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-add-n-to-num-divs.xsl"/>
                        </port>
                     </call>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-add-n-to-intermediate-divs.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-add-n-to-intermediate-divs.xsl"/>
                        </port>
                     </call>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-group-sp-without-div.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-group-sp-without-div.xsl"/>
                        </port>
                     </call>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="12"/>
                  </call>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Překlad')]]"/>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/angelus/angelus-move-note-to-speaker.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/angelus/angelus-move-note-to-speaker.xsl"/>
                        </port>
                     </call>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="13"/>
                  </call>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Překlad', 'Synopse')]]"/>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-pb-add-id.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-pb-add-id.xsl"/>
                        </port>
                     </call>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="14"/>
                  </call>
                  <documentation length="379">
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Změna odsazení textu. Mezery (elementy <b>space</b>) ve verších se redukují na měnší počet:</p>
                     <ul xmlns=""
                         xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                         xmlns:css="http://www.w3.org/1996/css"
                         xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                         xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                         xmlns:fs="https://www.daliboris.cz/ns/file-system"
                         xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                         xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                         xmlns:hub="http://docbook.org/ns/docbook"
                         xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                         xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                         xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                         xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <li>jedna mezera (<b>@quantity="1")</b> se odstraňuje (původně šlo o kombinaci poznámky nebo paginy a textu)</li>
                        <li>dvě mezery jsou bezpříznakové (odsazení kvůli sazbě), takže se ruší</li>
                        <li>3 a více mezer se nahrazují mezerami, jejichž počet je snížen o 1</li>
                     </ul>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Odstraní se také odstavec, který obsahuje pouze element <b>space</b>.</p>
                  </documentation>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Překlad', 'Synopse')]]"/>
                     <parameter name="use-when"
                                value="true()"/>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/angelus/angelus-normalize-indentation-spaces.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/angelus/angelus-normalize-indentation-spaces.xsl"/>
                        </port>
                     </call>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../Xslt/angelus-add-spaces-to-cantus.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/Xslt/angelus-add-spaces-to-cantus.xsl"/>
                        </port>
                     </call>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="15"/>
                  </call>
                  <documentation length="458">
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Přiřazení obrázků ke stranám, pouze u originálního textu, netýká se překladu.</p>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Vytvoří se element <b>facsimile</b> se seznamem souborů s obrázky jednotlivých stran.</p>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">V elementu <b>pb</b> se vytvří atrubut <b>@facs</b> s odkazem na soubor s obrázkem odpovídající strany.</p>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Jako parametry lze nastavit:</p>
                     <ul xmlns=""
                         xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                         xmlns:css="http://www.w3.org/1996/css"
                         xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                         xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                         xmlns:fs="https://www.daliboris.cz/ns/file-system"
                         xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                         xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                         xmlns:hub="http://docbook.org/ns/docbook"
                         xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                         xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                         xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                         xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <li>
                           <i>path</i>: výchozí cestu k souborům (musí končit lomítkem);</li>
                        <li>
                           <i>extension</i>: přípponá souborů (bez úvodní tečky)</li>
                     </ul>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Jméno se generuje z identifikátoru elementu <b>pb</b> přidáním výchozí cesty a přípony.</p>
                  </documentation>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Synopse')]]"/>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-add-facsimile.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-add-facsimile.xsl"/>
                        </port>
                     </call>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="16"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:div/@level"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="17"/>
                  </call>
                  <call step="p:delete">
                     <parameter name="match"
                                value="tei:div/*[position() =last()][self::tei:p[@class='division']]"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="18"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-cleaning-markup.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-cleaning-markup.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="19"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-add-rend-to-space.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-add-rend-to-space.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="20"/>
                  </call>
                  <call step="xtei:add-lang-usage"/>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="21"/>
                  </call>
                  <documentation length="194">
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Rozepíše odkazy na více postav</p>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Rozepíše zkrácené podoby jmen postav (Euch., Gen.), odstraní odpoídající poznámky.</p>
                     <p xmlns=""
                        xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                        xmlns:css="http://www.w3.org/1996/css"
                        xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                        xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                        xmlns:fs="https://www.daliboris.cz/ns/file-system"
                        xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                        xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                        xmlns:hub="http://docbook.org/ns/docbook"
                        xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                        xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                        xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                        xmlns:tei="http://www.tei-c.org/ns/1.0">Verše, které nemají přiřazenou postavu, seskupí a přiřadí jim nejbližší postavu.</p>
                  </documentation>
                  <call step="p:viewport">
                     <parameter name="match"
                                value="tei:TEI[tei:text[@n=('Text edice', 'Překlad')]]"/>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-sp-clean.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-sp-clean.xsl"/>
                        </port>
                     </call>
                     <call step="p:xslt">
                        <port name="stylesheet">
                           <parameter name="href"
                                      value="../xslt/tei/tei-sp-ad-missing.xsl"
                                      path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-sp-ad-missing.xsl"/>
                        </port>
                     </call>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="22"/>
                  </call>
               </body>
            </step>
            <step type="xh2t:section-to-tei"
                  name="section-to-tei">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="css"
                                value="http://www.w3.org/1996/css"/>
                     <namespace prefix="dxfs"
                                value="https://www.daliboris.cz/ns/xproc/file-system"/>
                     <namespace prefix="fs"
                                value="https://www.daliboris.cz/ns/file-system"/>
                     <namespace prefix="hub"
                                value="http://docbook.org/ns/docbook"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xh2t"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpl"
                                value="https://www.daliboris.cz/ns/xproc/pipeline"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xtei"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="data-file-path"
                             as="xs:string?"/>
                     <option name="position"
                             as="xs:integer"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:css="http://www.w3.org/1996/css"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xh2t="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/hub2tei"
                                    xmlns:fs="https://www.daliboris.cz/ns/file-system"
                                    xmlns:dxfs="https://www.daliboris.cz/ns/xproc/file-system"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:hub="http://docbook.org/ns/docbook"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="data-file-path-uri">
                     <parameter name="select"
                                value="resolve-uri($data-file-path, $base-uri)"/>
                  </call>
                  <call step="dxfs:document-file-info"
                        name="info"/>
                  <call step="p:variable"
                        name="file">
                     <parameter name="select"
                                value="/fs:file"/>
                     <parameter name="pipe"
                                value="report@info"/>
                  </call>
                  <call step="p:variable"
                        name="log-output-directory">
                     <parameter name="select"
                                value="$debug-path || '/hub2tei/' || $file/@stem || '/section-' || $position"/>
                  </call>
                  <call step="p:variable"
                        name="log-file-name">
                     <parameter name="select"
                                value="$file/@stem || '.xml'"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/hub2tei.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/hub2tei.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="1"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-clean-formatting.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-clean-formatting.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="2"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-group-elements.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-group-elements.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="3"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-arrange-elements.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-arrange-elements.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="4"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-group-vertical-space.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-group-vertical-space.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="5"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-clean-elements.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-clean-elements.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="6"/>
                  </call>
                  <call step="p:insert">
                     <parameter name="match"
                                value="tei:front"/>
                     <port name="insertion">
                        <parameter name="href"
                                   value="{$data-file-path-uri}"/>
                        <parameter name="select"
                                   value="/data/tei:text"/>
                     </port>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/nepomuk/nepomuk-add-editorial-to-front.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/nepomuk/nepomuk-add-editorial-to-front.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="7"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-group-speeches.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-group-speeches.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="8"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-move-division-p.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-move-division-p.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="9"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-move-trailer.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-move-trailer.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="10"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-move-pb.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-move-pb.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="11"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-drama-hierarchy.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-drama-hierarchy.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="12"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-synopsis-add-n-to-div.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-synopsis-add-n-to-div.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="13"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-move-trailer.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-move-trailer.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="14"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-drama-hierarchy-missing-levels.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-drama-hierarchy-missing-levels.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="15"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-move-trailer.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-move-trailer.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="16"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-drama-hierarchy-missing-levels-n.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-drama-hierarchy-missing-levels-n.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="17"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-drama-hierarchy-missing-levels-n.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-drama-hierarchy-missing-levels-n.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="18"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-drama-hierarchy-missing-levels-n.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-drama-hierarchy-missing-levels-n.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="19"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-div-notes.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-div-notes.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="20"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-group-speaker-divs.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-group-speaker-divs.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="21"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/angelus/angelus-group-speaker-divs-correct.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/angelus/angelus-group-speaker-divs-correct.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="22"/>
                  </call>
                  <call step="p:wrap">
                     <parameter name="match"
                                value="tei:text"/>
                     <parameter name="wrapper"
                                value="tei:TEI"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="23"/>
                  </call>
                  <call step="p:insert">
                     <parameter name="match"
                                value="tei:TEI"/>
                     <parameter name="position"
                                value="first-child"/>
                     <port name="insertion">
                        <parameter name="href"
                                   value="{$data-file-path-uri}"/>
                        <parameter name="select"
                                   value="//tei:teiHeader"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$log-output-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="file-name"
                                value="{$log-file-name}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="step"
                                value="24"/>
                  </call>
                  <call step="xxml:clean-namespaces"/>
               </body>
            </step>
         </body>
      </library>
   </analysis>
   <analysis file-name="pef-xpc-lib-base.xpl"
             path="file:///V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xproc/pef-xpc-lib-base.xpl"
             xmlns="https://www.daliboris.cz/ns/xproc/analysis"
             xmlns:xhtml="http://www.w3.org/1999/xhtml">
      <library>
         <prolog>
            <documentation length="37">
               <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                              xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                              xmlns:dxar="https://www.daliboris.cz/ns/xproc/archive"
                              xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                              xmlns:dxd="https://www.daliboris.cz/ns/xproc/docx"
                              xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                              xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                              xmlns:tei="http://www.tei-c.org/ns/1.0">
                  <xhtml:h1>Plays Encoding Framework Base Library</xhtml:h1>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <namespaces>
               <namespace prefix="dxar"
                          value="https://www.daliboris.cz/ns/xproc/archive"/>
               <namespace prefix="dxd"
                          value="https://www.daliboris.cz/ns/xproc/docx"/>
               <namespace prefix="p"
                          value="http://www.w3.org/ns/xproc"/>
               <namespace prefix="tei"
                          value="http://www.tei-c.org/ns/1.0"/>
               <namespace prefix="xhtml"
                          value="http://www.w3.org/1999/xhtml"/>
               <namespace prefix="xlog"
                          value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
               <namespace prefix="xpef"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
               <namespace prefix="xpefc"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
               <namespace prefix="xpl"
                          value="https://www.daliboris.cz/ns/xproc/pipeline"/>
               <namespace prefix="xs"
                          value="http://www.w3.org/2001/XMLSchema"/>
               <namespace prefix="xsl"
                          value="http://www.w3.org/1999/XSL/Transform"/>
               <namespace prefix="xml"
                          value="http://www.w3.org/XML/1998/namespace"/>
            </namespaces>
            <imports>
               <import href="../includes/docx-xpc-lib/src/xproc/docx-xpc-lib.xpl"/>
               <import href="../includes/log-xpc-lib/src/xproc/log-xpc-lib.xpl"/>
               <import href="pef-xpc-lib-common.xpl"/>
            </imports>
         </prolog>
         <body>
            <documentation length="37">
               <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                              xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                              xmlns:dxar="https://www.daliboris.cz/ns/xproc/archive"
                              xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                              xmlns:dxd="https://www.daliboris.cz/ns/xproc/docx"
                              xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                              xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                              xmlns:tei="http://www.tei-c.org/ns/1.0">
                  <xhtml:h1>Plays Encoding Framework Base Library</xhtml:h1>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <step type="xpef:docx-processing"
                  name="docx-processing">
               <prolog>
                  <documentation length="16">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:dxar="https://www.daliboris.cz/ns/xproc/archive"
                                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                    xmlns:dxd="https://www.daliboris.cz/ns/xproc/docx"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2>input-processing</xhtml:h2>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="dxar"
                                value="https://www.daliboris.cz/ns/xproc/archive"/>
                     <namespace prefix="dxd"
                                value="https://www.daliboris.cz/ns/xproc/docx"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpefc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
                     <namespace prefix="xpl"
                                value="https://www.daliboris.cz/ns/xproc/pipeline"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xsl"
                                value="http://www.w3.org/1999/XSL/Transform"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"
                            sequence="true"/>
                     <input port="ticket-in"
                            primary="false"
                            sequence="true"/>
                     <output port="result"
                             primary="true"
                             sequence="true"/>
                     <output port="ticket-out"
                             primary="false"
                             sequence="true"
                             pipe="ticket-in@docx-processing"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="16">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:dxar="https://www.daliboris.cz/ns/xproc/archive"
                                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                    xmlns:dxd="https://www.daliboris.cz/ns/xproc/docx"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2>input-processing</xhtml:h2>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="content-type">
                     <parameter name="select"
                                value="p:document-property(/, 'Q{}' || 'content-type')"/>
                  </call>
                  <call step="p:variable"
                        name="file-stem">
                     <parameter name="select"
                                value="tokenize(base-uri(/), '/')[last()] ! substring-before(., '.')"/>
                  </call>
                  <call step="p:variable"
                        name="output-temp-directory">
                     <parameter name="select"
                                value="if($debug) then string-join(( $debug-path-uri, $file-stem, 'docx-processing'), '/')  else ()"/>
                  </call>
                  <call step="dxd:get-ooxml-content">
                     <parameter name="content"
                                value="document"/>
                     <parameter name="debug-path"
                                value="{$debug-path}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$output-temp-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="file-name"
                                value="{$file-stem}.xml"/>
                     <parameter name="step"
                                value="1"/>
                  </call>
                  <call step="dxd:process-revisions-ooxml">
                     <parameter name="operation"
                                value="accept"/>
                     <parameter name="debug-path"
                                value="{$debug-path}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$output-temp-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="file-name"
                                value="{$file-stem}.xml"/>
                     <parameter name="step"
                                value="5"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/common/character-maps.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/common/character-maps.xsl"/>
                     </port>
                  </call>
                  <call step="p:file-create-tempfile">
                     <parameter name="delete-on-exit"
                                value="true"/>
                     <parameter name="suffix"
                                value=".xml"/>
                  </call>
                  <call step="p:variable"
                        name="href-tempfile-uri">
                     <parameter name="select"
                                value="xs:anyURI(.)"/>
                  </call>
                  <call step="p:store">
                     <parameter name="href"
                                value="{$href-tempfile-uri}"/>
                     <port name="anonymous">
                        <parameter name="pipe"
                                   value="result@character-maps"/>
                     </port>
                  </call>
                  <call step="p:load">
                     <parameter name="href"
                                value="{$href-tempfile-uri}"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/docx/docx-document-to-text.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/docx/docx-document-to-text.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$output-temp-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="file-name"
                                value="{$file-stem}.txt"/>
                     <parameter name="step"
                                value="10"/>
                  </call>
                  <call step="p:file-create-tempfile">
                     <parameter name="delete-on-exit"
                                value="true"/>
                     <parameter name="suffix"
                                value=".txt"/>
                  </call>
                  <call step="p:variable"
                        name="href-tempfile-uri">
                     <parameter name="select"
                                value="xs:anyURI(.)"/>
                  </call>
                  <call step="p:store">
                     <parameter name="href"
                                value="{$href-tempfile-uri}"/>
                     <port name="anonymous">
                        <parameter name="pipe"
                                   value="result@docx-text"/>
                     </port>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/docx/text-clean-lines.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/docx/text-clean-lines.xsl"/>
                     </port>
                     <parameter name="parameters"
                                value="map {'href' : $href-tempfile-uri }"/>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$output-temp-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="file-name"
                                value="{$file-stem}.xml"/>
                     <parameter name="step"
                                value="15"/>
                  </call>
               </body>
            </step>
            <step type="xpef:input-processing"
                  name="input-processing">
               <prolog>
                  <documentation length="16">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:dxar="https://www.daliboris.cz/ns/xproc/archive"
                                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                    xmlns:dxd="https://www.daliboris.cz/ns/xproc/docx"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2>input-processing</xhtml:h2>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="dxar"
                                value="https://www.daliboris.cz/ns/xproc/archive"/>
                     <namespace prefix="dxd"
                                value="https://www.daliboris.cz/ns/xproc/docx"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpefc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
                     <namespace prefix="xpl"
                                value="https://www.daliboris.cz/ns/xproc/pipeline"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xsl"
                                value="http://www.w3.org/1999/XSL/Transform"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"
                            sequence="true"/>
                     <input port="ticket-in"
                            primary="false"
                            sequence="true"/>
                     <output port="result"
                             primary="true"
                             sequence="true"/>
                     <output port="ticket-out"
                             primary="false"
                             sequence="true"
                             pipe="ticket-in@input-processing"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="16">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:dxar="https://www.daliboris.cz/ns/xproc/archive"
                                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                    xmlns:dxd="https://www.daliboris.cz/ns/xproc/docx"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2>input-processing</xhtml:h2>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="content-type">
                     <parameter name="select"
                                value="p:document-property(/, 'Q{}' || 'content-type')"/>
                  </call>
                  <call step="p:choose"
                        length="1">
                     <call step="p:when">
                        <parameter name="test"
                                   value="$content-type = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'"/>
                     </call>
                  </call>
                  <call step="p:identity"/>
               </body>
            </step>
            <step type="xpef:xml-processing"
                  name="xml-processing">
               <prolog>
                  <documentation length="14">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:dxar="https://www.daliboris.cz/ns/xproc/archive"
                                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                    xmlns:dxd="https://www.daliboris.cz/ns/xproc/docx"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2>xml-processing</xhtml:h2>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="dxar"
                                value="https://www.daliboris.cz/ns/xproc/archive"/>
                     <namespace prefix="dxd"
                                value="https://www.daliboris.cz/ns/xproc/docx"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpefc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
                     <namespace prefix="xpl"
                                value="https://www.daliboris.cz/ns/xproc/pipeline"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xsl"
                                value="http://www.w3.org/1999/XSL/Transform"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"
                            sequence="true"/>
                     <input port="ticket-in"
                            primary="false"
                            sequence="true"/>
                     <output port="result"
                             primary="true"
                             sequence="true"/>
                     <output port="ticket-out"
                             primary="false"
                             sequence="true"
                             pipe="ticket-in@xml-processing"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="14">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:dxar="https://www.daliboris.cz/ns/xproc/archive"
                                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                    xmlns:dxd="https://www.daliboris.cz/ns/xproc/docx"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xpl="https://www.daliboris.cz/ns/xproc/pipeline"
                                    xmlns:tei="http://www.tei-c.org/ns/1.0">
                        <xhtml:h2>xml-processing</xhtml:h2>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:identity"/>
               </body>
            </step>
            <step type="xpef:create-list-of-speakers"
                  name="creating-list-of-speakers">
               <prolog>
                  <namespaces>
                     <namespace prefix="dxar"
                                value="https://www.daliboris.cz/ns/xproc/archive"/>
                     <namespace prefix="dxd"
                                value="https://www.daliboris.cz/ns/xproc/docx"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="tei"
                                value="http://www.tei-c.org/ns/1.0"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xpefc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
                     <namespace prefix="xpl"
                                value="https://www.daliboris.cz/ns/xproc/pipeline"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xsl"
                                value="http://www.w3.org/1999/XSL/Transform"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="doc-name"
                             as="xs:string"
                             required="true"/>
                     <option name="data-directory-path"
                             as="xs:anyURI"
                             required="true"/>
                     <option name="data-file-path"
                             as="xs:anyURI"
                             required="true"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <input port="job-ticket"
                            primary="false"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="line-numbers-file-path">
                     <parameter name="select"
                                value="concat($data-directory-path, '/', $doc-name, '-line-numbers.xml')"/>
                  </call>
                  <call step="p:variable"
                        name="output-temp-directory">
                     <parameter name="select"
                                value="$debug-path || '/' || $doc-name || '/' || 'create-list-of-speakers'"/>
                  </call>
                  <call step="p:variable"
                        name="data-file-path-uri">
                     <parameter name="select"
                                value="resolve-uri($data-file-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="file-stem">
                     <parameter name="select"
                                value="$doc-name"/>
                  </call>
                  <call step="p:identity"
                        name="original"/>
                  <call step="p:choose"
                        length="1">
                     <call step="p:when">
                        <parameter name="test"
                                   value="false()"/>
                        <call step="p:xquery">
                           <port name="query">
                              <parameter name="href"
                                         value="../xquery/tei-assign-line-number.xquery"
                                         path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xquery/tei-assign-line-number.xquery"/>
                           </port>
                        </call>
                        <call step="p:xslt">
                           <port name="source">
                              <parameter name="pipe"
                                         value="source@creating-list-of-speakers"/>
                           </port>
                           <port name="stylesheet">
                              <parameter name="href"
                                         value="../xslt/common/tei-assign-line-number-iterating.xsl"
                                         path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/common/tei-assign-line-number-iterating.xsl"/>
                           </port>
                           <parameter name="parameters"
                                      value="map {      'line-numbers-file-path' : $data-file-path-uri      }"/>
                        </call>
                     </call>
                     <call step="p:otherwise">
                        <call step="p:xslt">
                           <port name="source">
                              <parameter name="pipe"
                                         value="source@creating-list-of-speakers"/>
                           </port>
                           <port name="stylesheet">
                              <parameter name="href"
                                         value="../xslt/common/tei-assign-line-number-iterating.xsl"
                                         path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/common/tei-assign-line-number-iterating.xsl"/>
                           </port>
                           <parameter name="parameters"
                                      value="map {      'line-numbers-file-path' : $data-file-path-uri      }"/>
                        </call>
                     </call>
                  </call>
                  <call step="p:viewport"
                        name="play-text">
                     <parameter name="match"
                                value="tei:TEI"/>
                     <call step="p:choose"
                           length="1">
                        <call step="p:when">
                           <parameter name="test"
                                      value="false()"/>
                        </call>
                        <call step="p:otherwise">
                        </call>
                     </call>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$output-temp-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="file-name"
                                value="{$file-stem}.xml"/>
                     <parameter name="step"
                                value="1"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/common/tei-add-who-to-sp.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/common/tei-add-who-to-sp.xsl"/>
                     </port>
                  </call>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$output-temp-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="file-name"
                                value="{$file-stem}.xml"/>
                     <parameter name="step"
                                value="5"/>
                  </call>
                  <call step="xpefc:add-persName-to-speaker"
                        name="corpus"/>
                  <call step="xlog:store">
                     <parameter name="output-directory"
                                value="{$output-temp-directory}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <parameter name="debug"
                                value="{$debug}"/>
                     <parameter name="file-name"
                                value="{$file-stem}.xml"/>
                     <parameter name="step"
                                value="10"/>
                  </call>
               </body>
            </step>
         </body>
      </library>
   </analysis>
   <analysis file-name="pef-xpc-lib-common.xpl"
             path="file:///V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xproc/pef-xpc-lib-common.xpl"
             xmlns="https://www.daliboris.cz/ns/xproc/analysis"
             xmlns:xhtml="http://www.w3.org/1999/xhtml">
      <library>
         <prolog>
            <documentation length="39">
               <xhtml:section xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                              xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0">
                  <xhtml:h1>Plays Encoding Framework Common Library</xhtml:h1>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <namespaces>
               <namespace prefix="p"
                          value="http://www.w3.org/ns/xproc"/>
               <namespace prefix="xhtml"
                          value="http://www.w3.org/1999/xhtml"/>
               <namespace prefix="xlog"
                          value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
               <namespace prefix="xpefc"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
               <namespace prefix="xs"
                          value="http://www.w3.org/2001/XMLSchema"/>
               <namespace prefix="xml"
                          value="http://www.w3.org/XML/1998/namespace"/>
            </namespaces>
            <imports>
               <import href="../includes/log-xpc-lib/src/xproc/log-xpc-lib.xpl"/>
            </imports>
         </prolog>
         <body>
            <documentation length="39">
               <xhtml:section xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                              xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0">
                  <xhtml:h1>Plays Encoding Framework Common Library</xhtml:h1>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <step type="xpefc:add">
               <prolog>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpefc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../Xslt/?.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/Xslt/?.xsl"/>
                     </port>
                     <parameter name="parameters"
                                value="map {'parameter' : 'value' }"/>
                  </call>
                  <call step="p:if">
                     <parameter name="test"
                                value="$debug"/>
                  </call>
                  <call step="p:store">
                     <parameter name="href"
                                value="../result/?.xml"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/result/?.xml"/>
                     <parameter name="serialization"
                                value="map{'indent' : true()}"/>
                  </call>
               </body>
            </step>
            <step type="xpefc:add-persName-to-speaker">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpefc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpefc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/common"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/common/add-persName-to-speaker.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/common/add-persName-to-speaker.xsl"/>
                     </port>
                  </call>
               </body>
            </step>
         </body>
      </library>
   </analysis>
   <analysis file-name="tei-play-lib.xpl"
             path="file:///V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xproc/tei-play-lib.xpl"
             xmlns="https://www.daliboris.cz/ns/xproc/analysis"
             xmlns:xhtml="http://www.w3.org/1999/xhtml">
      <library>
         <prolog>
            <documentation length="0">
               <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                              xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                              xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                              xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                              xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                              xmlns:xdc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"
                              xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei">
                  <xhtml:h1/>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <namespaces>
               <namespace prefix="p"
                          value="http://www.w3.org/ns/xproc"/>
               <namespace prefix="xdc"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"/>
               <namespace prefix="xevt"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
               <namespace prefix="xhtml"
                          value="http://www.w3.org/1999/xhtml"/>
               <namespace prefix="xlog"
                          value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
               <namespace prefix="xpef"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
               <namespace prefix="xs"
                          value="http://www.w3.org/2001/XMLSchema"/>
               <namespace prefix="xsl"
                          value="http://www.w3.org/1999/XSL/Transform"/>
               <namespace prefix="xtei"
                          value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
               <namespace prefix="xxml"
                          value="https://www.daliboris.cz/ns/xproc/xml"/>
               <namespace prefix="xml"
                          value="http://www.w3.org/XML/1998/namespace"/>
            </namespaces>
            <imports>
               <import href="../includes/log-xpc-lib/src/xproc/log-xpc-lib.xpl"/>
               <import href="common-lib.xpl"/>
               <import href="evt-play-lib.xpl"/>
               <import href="dracor-lib.xpl"/>
            </imports>
         </prolog>
         <body>
            <documentation length="0">
               <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                              xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                              xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                              xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                              xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                              xmlns:xdc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"
                              xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei">
                  <xhtml:h1/>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <step type="xtei:create-person-list"
                  name="creating-person-list">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xdc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xdc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xsl"
                                value="http://www.w3.org/1999/XSL/Transform"/>
                     <namespace prefix="xtei"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="include-variants"
                             as="xs:boolean"
                             select="false()"/>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xdc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:xquery">
                     <port name="query">
                        <parameter name="href"
                                   value="../xquery/get-listPerson-from-play.xquery"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xquery/get-listPerson-from-play.xquery"/>
                     </port>
                     <parameter name="parameters"
                                value="map { 'include-variants' : $include-variants}"/>
                  </call>
               </body>
            </step>
            <step type="xtei:add-lang-usage"
                  name="adding-lang-usage">
               <prolog>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xdc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xdc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xsl"
                                value="http://www.w3.org/1999/XSL/Transform"/>
                     <namespace prefix="xtei"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <documentation length="0">
                     <xhtml:section xmlns:xpef="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"
                                    xmlns:xxml="https://www.daliboris.cz/ns/xproc/xml"
                                    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
                                    xmlns:xevt="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"
                                    xmlns:xlog="https://www.daliboris.cz/ns/xproc/logging/1.0"
                                    xmlns:xdc="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"
                                    xmlns:xtei="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei">
                        <xhtml:h2/>
                        <xhtml:p/>
                     </xhtml:section>
                  </documentation>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-add-lang-usage.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-add-lang-usage.xsl"/>
                     </port>
                  </call>
               </body>
            </step>
            <step type="xtei:postprocessing"
                  name="postprocessing">
               <prolog>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xdc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xsl"
                                value="http://www.w3.org/1999/XSL/Transform"/>
                     <namespace prefix="xtei"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="data-file-path"
                             as="xs:string?"/>
                     <option name="output-directory-path"
                             as="xs:string?"/>
                     <option name="output-file-name"
                             as="xs:string?"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <call step="xdc:tei-to-dracor">
                     <parameter name="data-file-path"
                                value="{$data-file-path}"/>
                     <parameter name="debug-path"
                                value="{$debug-path}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <port name="anonymous">
                        <parameter name="pipe"
                                   value="source@postprocessing"/>
                     </port>
                  </call>
                  <call step="xevt:tei-to-evt"
                        name="evt">
                     <parameter name="output-directory-path"
                                value="{$output-directory-path}/evt"/>
                     <parameter name="data-file-path"
                                value="{$data-file-path}"/>
                     <parameter name="debug-path"
                                value="{$debug-path}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <port name="anonymous">
                        <parameter name="pipe"
                                   value="source@postprocessing"/>
                     </port>
                  </call>
                  <call step="xevt:validate-hierarchies">
                     <parameter name="output-directory-path"
                                value="{$output-directory-path}/validation"/>
                     <parameter name="output-file-name"
                                value="{$output-file-name}.html"/>
                     <parameter name="debug-path"
                                value="{$debug-path}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                     <port name="anonymous">
                        <parameter name="pipe"
                                   value="source@postprocessing"/>
                     </port>
                  </call>
                  <call step="xevt:zip">
                     <parameter name="input-directory-path"
                                value="{$output-directory-path}/evt"/>
                     <parameter name="output-directory-path"
                                value="{$output-directory-path}/zip"/>
                     <parameter name="debug-path"
                                value="{$debug-path}"/>
                     <parameter name="base-uri"
                                value="{$base-uri}"/>
                  </call>
               </body>
            </step>
            <step type="xtei:convert"
                  name="converting">
               <prolog>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xdc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xsl"
                                value="http://www.w3.org/1999/XSL/Transform"/>
                     <namespace prefix="xtei"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                     <option name="data-file-path"
                             as="xs:string?"/>
                     <option name="output-directory-path"
                             as="xs:string?"/>
                     <option name="output-file-name"
                             as="xs:string?"/>
                     <option name="target"
                             as="xs:string*"
                             values="('EVT', 'DraCor', 'text')"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <call step="p:variable"
                        name="debug">
                     <parameter name="select"
                                value="$debug-path || '' ne ''"/>
                  </call>
                  <call step="p:variable"
                        name="debug-path-uri">
                     <parameter name="select"
                                value="resolve-uri($debug-path, $base-uri)"/>
                  </call>
                  <call step="p:variable"
                        name="output-directory-path-uri">
                     <parameter name="select"
                                value="resolve-uri($output-directory-path, $base-uri)"/>
                  </call>
                  <call step="p:choose"
                        length="1">
                     <call step="p:when">
                        <parameter name="test"
                                   value="$target='DraCor'"/>
                     </call>
                  </call>
                  <call step="p:choose"
                        length="1">
                     <call step="p:when">
                        <parameter name="test"
                                   value="not(empty($output-directory-path) or empty($output-file-name))"/>
                     </call>
                  </call>
                  <call step="p:choose"
                        length="1">
                     <call step="p:when">
                        <parameter name="test"
                                   value="$target='text'"/>
                     </call>
                  </call>
               </body>
            </step>
            <step type="xtei:tei-to-text">
               <prolog>
                  <namespaces>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xdc"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/dracor"/>
                     <namespace prefix="xevt"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/evt"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xlog"
                                value="https://www.daliboris.cz/ns/xproc/logging/1.0"/>
                     <namespace prefix="xpef"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xsl"
                                value="http://www.w3.org/1999/XSL/Transform"/>
                     <namespace prefix="xtei"
                                value="https://www.daliboris.cz/ns/xproc/plays-encoding-framework/tei"/>
                     <namespace prefix="xxml"
                                value="https://www.daliboris.cz/ns/xproc/xml"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="debug-path"
                             select="()"
                             as="xs:string?"/>
                     <option name="base-uri"
                             as="xs:anyURI"
                             select="static-base-uri()"/>
                  </options>
                  <ports>
                     <input port="source"
                            primary="true"/>
                     <output port="result"
                             primary="true"/>
                  </ports>
               </prolog>
               <body>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/tei/tei-to-text.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/tei/tei-to-text.xsl"/>
                     </port>
                  </call>
                  <call step="p:file-create-tempfile">
                     <parameter name="delete-on-exit"
                                value="true"/>
                     <parameter name="suffix"
                                value=".txt"/>
                  </call>
                  <call step="p:variable"
                        name="href-tempfile-uri">
                     <parameter name="select"
                                value="xs:anyURI(.)"/>
                  </call>
                  <call step="p:store">
                     <parameter name="href"
                                value="{$href-tempfile-uri}"/>
                     <port name="anonymous">
                        <parameter name="pipe"
                                   value="result@tei-to-text"/>
                     </port>
                  </call>
                  <call step="p:xslt">
                     <port name="stylesheet">
                        <parameter name="href"
                                   value="../xslt/docx/text-clean-lines.xsl"
                                   path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt/docx/text-clean-lines.xsl"/>
                     </port>
                     <parameter name="parameters"
                                value="map {'href' : $href-tempfile-uri }"/>
                  </call>
               </body>
            </step>
         </body>
      </library>
   </analysis>
   <analysis file-name="xproc-project-setup.xpl"
             path="file:///V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xproc/xproc-project-setup.xpl"
             xmlns="https://www.daliboris.cz/ns/xproc/analysis"
             xmlns:xhtml="http://www.w3.org/1999/xhtml">
      <step>
         <prolog>
            <documentation length="0">
               <xhtml:section xmlns:xps="https://www.daliboris.cs/ns/xproc/project/setup">
                  <xhtml:h2/>
                  <xhtml:p/>
               </xhtml:section>
            </documentation>
            <namespaces>
               <namespace prefix="c"
                          value="http://www.w3.org/ns/xproc-step"/>
               <namespace prefix="p"
                          value="http://www.w3.org/ns/xproc"/>
               <namespace prefix="xhtml"
                          value="http://www.w3.org/1999/xhtml"/>
               <namespace prefix="xps"
                          value="https://www.daliboris.cs/ns/xproc/project/setup"/>
               <namespace prefix="xs"
                          value="http://www.w3.org/2001/XMLSchema"/>
               <namespace prefix="xml"
                          value="http://www.w3.org/XML/1998/namespace"/>
            </namespaces>
            <options>
               <option name="debug-path"
                       select="()"
                       as="xs:string?"/>
               <option name="base-uri"
                       as="xs:anyURI"
                       select="static-base-uri()"/>
               <option name="saxon-version"
                       as="xs:string"
                       select="'12.3'"/>
               <option name="morgana-version"
                       as="xs:string"
                       select="'1.6.4'"/>
            </options>
            <ports>
               <output port="result"
                       primary="true"/>
            </ports>
         </prolog>
         <body>
            <step type="xps:create-directories">
               <prolog>
                  <namespaces>
                     <namespace prefix="c"
                                value="http://www.w3.org/ns/xproc-step"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xps"
                                value="https://www.daliboris.cs/ns/xproc/project/setup"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
               </prolog>
               <body>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../../doc"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/doc"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../../run"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/run"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../../input/text/docx"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/input/text/docx"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../../input/text/hub"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/input/text/hub"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../../input/text/tei"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/input/text/tei"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../../output"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/output"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../_debug"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/_debug"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../_temp"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/_temp"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../etalon"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/etalon"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../schema/schematron"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/schema/schematron"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../schema/xsd"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/schema/xsd"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../schema/rng"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/schema/rng"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../settings"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/settings"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../morgana"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/morgana"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../tests"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/tests"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../input/text/docx"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/input/text/docx"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../input/text/xml"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/input/text/xml"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../input/text/hub"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/input/text/hub"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../output/text/tei"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/output/text/tei"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../xslt"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xslt"/>
                  </call>
                  <call step="p:file-mkdir">
                     <parameter name="href"
                                value="../xquery"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/src/xquery"/>
                  </call>
               </body>
            </step>
            <step type="xps:create-gitignore">
               <prolog>
                  <namespaces>
                     <namespace prefix="c"
                                value="http://www.w3.org/ns/xproc-step"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xps"
                                value="https://www.daliboris.cs/ns/xproc/project/setup"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
               </prolog>
               <body>
                  <call step="p:file-info">
                     <parameter name="href"
                                value="../../.gitignore"
                                path="file:/V:/Projekty/Github/Daliboris/DraCor/plays-encoding-framework/.gitignore"/>
                     <parameter name="fail-on-error"
                                value="false"/>
                  </call>
                  <call step="p:variable"
                        name="file-exists">
                     <parameter name="select"
                                value="exists(/c:file)"/>
                  </call>
                  <call step="p:if">
                     <parameter name="test"
                                value="not($file-exists)"/>
		
			
# directories with temporary files
_debug
_temp

# editor settings and directories
.vscode
.vs
*.code-workspace

# local files with local settings
*local*
			
		
	</call>
               </body>
            </step>
            <step type="xps:download-morgana">
               <prolog>
                  <namespaces>
                     <namespace prefix="c"
                                value="http://www.w3.org/ns/xproc-step"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xps"
                                value="https://www.daliboris.cs/ns/xproc/project/setup"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="version"
                             as="xs:string"
                             required="true"/>
                  </options>
                  <ports>
                     <input port="source"
                            sequence="true"/>
                     <output port="result"
                             sequence="true"/>
                  </ports>
               </prolog>
               <body>
                  <call step="p:variable"
                        name="file-name">
                     <parameter name="select"
                                value="'MorganaXProc-IIIse-' || $version || '.zip'"/>
                  </call>
                  <call step="p:file-info">
                     <parameter name="href"
                                value="../morgana/{$file-name}"/>
                     <parameter name="fail-on-error"
                                value="false"/>
                  </call>
                  <call step="p:variable"
                        name="file-exists">
                     <parameter name="select"
                                value="exists(/c:file)"/>
                  </call>
                  <call step="p:if">
                     <parameter name="test"
                                value="not($file-exists)"/>
                  </call>
                  <call step="p:load">
                     <parameter name="href"
                                value="../morgana/{$file-name}"/>
                  </call>
                  <call step="p:unarchive">
                     <parameter name="relative-to"
                                value="{p:document-property(/, 'base-uri')}"/>
                     <parameter name="exclude-filter"
                                value="^__MACOSX/"/>
                  </call>
                  <call step="p:for-each"/>
                  <call step="p:sink"/>
                  <call step="p:directory-list">
                     <parameter name="path"
                                value="../morgana"/>
                     <parameter name="max-depth"
                                value="unbounded"/>
                  </call>
               </body>
            </step>
            <step type="xps:setup-morgana">
               <prolog>
                  <namespaces>
                     <namespace prefix="c"
                                value="http://www.w3.org/ns/xproc-step"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xps"
                                value="https://www.daliboris.cs/ns/xproc/project/setup"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="saxon-version"
                             as="xs:string"
                             required="true"/>
                     <option name="morgana-version"
                             as="xs:string"
                             required="true"/>
                  </options>
               </prolog>
               <body>
                  <call step="p:file-copy">
                     <parameter name="href"
                                value="../_temp/saxon/saxon-he-{$saxon-version}.jar"/>
                     <parameter name="target"
                                value="../morgana/MorganaXProc-IIIse-{$morgana-version}/MorganaXProc-IIIse_lib/saxon-he-{$saxon-version}.jar"/>
                  </call>
                  <call step="p:file-copy">
                     <parameter name="href"
                                value="../_temp/saxon/saxon-he-xqj-{$saxon-version}.jar"/>
                     <parameter name="target"
                                value="../morgana/MorganaXProc-IIIse-{$morgana-version}/MorganaXProc-IIIse_lib/saxon-he-xqj-{$saxon-version}.jar"/>
                  </call>
               </body>
            </step>
            <step type="xps:download-saxon">
               <prolog>
                  <namespaces>
                     <namespace prefix="c"
                                value="http://www.w3.org/ns/xproc-step"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xps"
                                value="https://www.daliboris.cs/ns/xproc/project/setup"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="version"
                             as="xs:string"
                             required="true"/>
                  </options>
                  <ports>
                     <input port="source"
                            sequence="true"/>
                     <output port="result"
                             sequence="true"/>
                  </ports>
               </prolog>
               <body>
                  <call step="p:variable"
                        name="url-version">
                     <parameter name="select"
                                value="replace($version, '\.', '-')"/>
                  </call>
                  <call step="p:variable"
                        name="file-name">
                     <parameter name="select"
                                value="'SaxonHE' || $version || 'J.zip'"/>
                  </call>
                  <call step="p:variable"
                        name="url-file-name">
                     <parameter name="select"
                                value="'SaxonHE' || $url-version || 'J.zip'"/>
                  </call>
                  <call step="p:file-info">
                     <parameter name="href"
                                value="../_temp/saxon/{$file-name}"/>
                     <parameter name="fail-on-error"
                                value="false"/>
                  </call>
                  <call step="p:variable"
                        name="file-exists">
                     <parameter name="select"
                                value="exists(/c:file)"/>
                  </call>
                  <call step="p:if">
                     <parameter name="test"
                                value="not($file-exists)"/>
                  </call>
                  <call step="p:load">
                     <parameter name="href"
                                value="..//_temp/saxon/{$file-name}"/>
                  </call>
                  <call step="p:unarchive">
                     <parameter name="relative-to"
                                value="{p:document-property(/, 'base-uri')}"/>
                  </call>
                  <call step="p:for-each"/>
                  <call step="p:sink"/>
                  <call step="p:directory-list">
                     <parameter name="path"
                                value="../_temp/saxon"/>
                     <parameter name="max-depth"
                                value="unbounded"/>
                  </call>
               </body>
            </step>
            <step type="xps:download-schemas">
               <prolog>
                  <namespaces>
                     <namespace prefix="c"
                                value="http://www.w3.org/ns/xproc-step"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xps"
                                value="https://www.daliboris.cs/ns/xproc/project/setup"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <ports>
                     <output port="result"
                             sequence="true"/>
                  </ports>
               </prolog>
               <body>
                  <call step="xps:download-file">
                     <parameter name="file-name"
                                value="dracor-schema-v1.0.0-beta.4.rng"/>
                     <parameter name="url"
                                value="https://github.com/dracor-org/dracor-schema/releases/download/v1.0.0-beta.4/dracor-schema-v1.0.0-beta.4.rng"/>
                     <parameter name="target-directory"
                                value="../schema/rng"/>
                  </call>
                  <call step="xps:download-file">
                     <parameter name="file-name"
                                value="dracor-schema-v1.0.0-beta.4.sch"/>
                     <parameter name="url"
                                value="https://github.com/dracor-org/dracor-schema/releases/download/v1.0.0-beta.4/dracor-schema-v1.0.0-beta.4.sch"/>
                     <parameter name="target-directory"
                                value="../schema/schematron"/>
                  </call>
                  <call step="xps:download-file">
                     <parameter name="file-name"
                                value="dracor-schema-v1.0.0-beta.4.sch"/>
                     <parameter name="url"
                                value="https://github.com/dracor-org/dracor-schema/releases/download/v1.0.0-beta.4/dracor-schema-v1.0.0-beta.4.sch"/>
                     <parameter name="target-directory"
                                value="../schema/schematron"/>
                  </call>
                  <call step="xps:download-file">
                     <parameter name="file-name"
                                value="hub.rng"/>
                     <parameter name="url"
                                value="https://raw.githubusercontent.com/le-tex/Hub/refs/heads/master/hub.rng"/>
                     <parameter name="target-directory"
                                value="../schema/rng"/>
                  </call>
                  <call step="xps:download-file">
                     <parameter name="file-name"
                                value="cssa-publisher-extensions.rng"/>
                     <parameter name="url"
                                value="https://raw.githubusercontent.com/le-tex/CSSa/6ea9e14d9ffe551f7bbdd8fe1e9db5830e28f85e/cssa-publisher-extensions.rng"/>
                     <parameter name="target-directory"
                                value="../schema/rng/css"/>
                  </call>
                  <call step="xps:download-file">
                     <parameter name="file-name"
                                value="cssa-rules.rng"/>
                     <parameter name="url"
                                value="https://raw.githubusercontent.com/le-tex/CSSa/6ea9e14d9ffe551f7bbdd8fe1e9db5830e28f85e/cssa-rules.rng"/>
                     <parameter name="target-directory"
                                value="../schema/rng/css"/>
                  </call>
                  <call step="xps:download-file">
                     <parameter name="file-name"
                                value="css.rng"/>
                     <parameter name="url"
                                value="https://raw.githubusercontent.com/le-tex/CSSa/6ea9e14d9ffe551f7bbdd8fe1e9db5830e28f85e/css.rng"/>
                     <parameter name="target-directory"
                                value="../schema/rng/css"/>
                  </call>
                  <call step="xps:download-file">
                     <parameter name="file-name"
                                value="docbook.rng"/>
                     <parameter name="url"
                                value="https://raw.githubusercontent.com/le-tex/Hub/refs/heads/master/dbk/docbook.rng"/>
                     <parameter name="target-directory"
                                value="../schema/rng/dbk"/>
                  </call>
                  <call step="p:directory-list">
                     <parameter name="path"
                                value="../schema"/>
                     <parameter name="max-depth"
                                value="unbounded"/>
                  </call>
               </body>
            </step>
            <step type="xps:download-file">
               <prolog>
                  <namespaces>
                     <namespace prefix="c"
                                value="http://www.w3.org/ns/xproc-step"/>
                     <namespace prefix="p"
                                value="http://www.w3.org/ns/xproc"/>
                     <namespace prefix="xhtml"
                                value="http://www.w3.org/1999/xhtml"/>
                     <namespace prefix="xps"
                                value="https://www.daliboris.cs/ns/xproc/project/setup"/>
                     <namespace prefix="xs"
                                value="http://www.w3.org/2001/XMLSchema"/>
                     <namespace prefix="xml"
                                value="http://www.w3.org/XML/1998/namespace"/>
                  </namespaces>
                  <options>
                     <option name="file-name"
                             as="xs:string"/>
                     <option name="url"
                             as="xs:anyURI"/>
                     <option name="target-directory"
                             as="xs:string"/>
                  </options>
                  <ports>
                     <input port="source"
                            sequence="true"/>
                     <output port="result"
                             sequence="true"/>
                  </ports>
               </prolog>
               <body>
                  <call step="p:file-info">
                     <parameter name="href"
                                value="{$target-directory}/{$file-name}"/>
                     <parameter name="fail-on-error"
                                value="false"/>
                  </call>
                  <call step="p:variable"
                        name="file-exists">
                     <parameter name="select"
                                value="exists(/c:file)"/>
                  </call>
                  <call step="p:if">
                     <parameter name="test"
                                value="not($file-exists)"/>
                  </call>
               </body>
            </step>
            <call step="p:variable"
                  name="debug">
               <parameter name="select"
                          value="$debug-path || '' ne ''"/>
            </call>
            <call step="p:variable"
                  name="debug-path-uri">
               <parameter name="select"
                          value="resolve-uri($debug-path, $base-uri)"/>
            </call>
            <call step="xps:create-directories"/>
            <call step="xps:download-morgana">
               <parameter name="version"
                          value="{$morgana-version}"/>
            </call>
            <call step="xps:download-saxon">
               <parameter name="version"
                          value="{$saxon-version}"/>
            </call>
            <call step="xps:setup-morgana">
               <parameter name="morgana-version"
                          value="{$morgana-version}"/>
               <parameter name="saxon-version"
                          value="{$saxon-version}"/>
            </call>
            <call step="p:directory-list">
               <parameter name="path"
                          value="../"/>
               <parameter name="max-depth"
                          value="unbounded"/>
            </call>
         </body>
      </step>
   </analysis>
</xpan:report>